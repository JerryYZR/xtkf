<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Lei Shi">
    <meta http-equiv="Cache-Control" content="o-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="csrf-token" content="1483780974##87f89328c5616669f00302a263fe9061bb852818">


    <title>讨论区 - 知课</title>

    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/font-awesome.min.css">
    <link rel="stylesheet" href="styles/monokai-sublime.min.css">
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/katex.min.css">
    <link rel="stylesheet" href="styles/video-js.min.css">
    <link rel="stylesheet" href="temp/styles.css">

    <style>
        @font-face {
            font-family: "lantingxihei";
            src: url("../fonts/FZLTCXHJW.TTF");
        }

        /* modal 模态框*/
        #invite-user .modal-body {
            overflow: hidden;
        }
        #invite-user .modal-body .form-label {
            margin-bottom: 16px;
            font-size:14px;
        }
        #invite-user .modal-body .form-invite {
            width: 80%;
            padding: 6px 12px;
            background-color: #eeeeee;
            border: 1px solid #cccccc;
            border-radius: 5px;
            float: left;
            margin-right: 10px;
        }
        #invite-user .modal-body .msg-modal-style {
            background-color: #7dd383;
            margin-top: 10px;
            padding: 6px 0;
            text-align: center;
            width: 100%;
        }
        #invite-user .modal-body .modal-flash {
            position: absolute;
            top: 53px;
            right: 74px;
            z-index: 999;
        }
        /* end modal */

        .en-footer {
            padding: 30px;
            text-align: center;
            font-size: 14px;
        }
        .btn{
            background: #0086B3;
        }


    </style>
</head>

<body>
<nav class="navbar navbar-default navbar-fixed-top header" style="background: #FFFFFF;">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">知课</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">
                <!--<img src="../img/logo_03.png">-->
            </a>
        </div>
        <div class="collapse navbar-collapse" id="header-navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="">
                    <a href="../paths/index.html">首页</a>
                </li>
                <li class="">
                    <a href="../paths/index.html">路径</a>
                </li>
                <li class="">
                    <a href="index.html">讨论区</a>
                </li>
                <li class=" bootcamp new-nav logo-1111">
                    <a href="../bootcamp/index.html">关于我们</a>

                </li>

                </li>

            </ul>

            <form class="navbar-form navbar-right" action="../search" method="get" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" name="search" autocomplete="off" placeholder="搜索 讨论组/标签">
                </div>
            </form>
        </div>
    </div>
</nav>


<div class="container layout layout-margin-top">
    <div class="row">
        <div class="col-md-9 layout-body">
            <div class="content">
                <ul class="nav nav-tabs question-types" role="tablist">
                    <li role="presentation" class="active">
                        <a href="#all" onclick="showAll()" aria-controls="all" role="tab" toggle="tab">问题列表</a>
                    </li>

                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active">
                        <ul class="row question-items">
                            <div id="questionlist"></div>
                            <li class="question-item" id="bigData">
                                <div class="col-md-10">
                                    <div class="col-sm-2 question-item-author">
                                        <div class="user-avatar ">
                                            <a class="avatar" href="../user/13/study.html" target="_blank">
                                                <img src="https://dn-simplecloud.shiyanlou.com/gravataradmin.png?imageView2/1/w/100/h/100">
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-sm-10">
                                        <h4>
                                            <img src="../img/topQuestion.png" id="headpic">
                                            <a class="question-title" target="_blank" id="title10"> 求大数据分析工具！！</a>
                                        </h4>
                                        <div class="question-item-summary">

                                            <div class="user-username ">
                                                <span>楼主:</span>
                                                <span id="quizzername">林岳峰</span>
                                                <span class="question-item-date">&nbsp;回复数：</span>
                                                <a class="avatar" href="../user/13/study.html" target="_blank" id="replynum">
                                                    30
                                                </a>
                                                <br />
                                                <span>详情：</span>
                                                <span id="content">最近在学大数据分析，不知道用什么工具好</span>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <nav class="pagination-container">
                            <ul class="pagination">
                                <li class="disabled">
                                    <a href="#" aria-label="Previous">
                                        <span aria-hidden="true">上一页</span>
                                    </a>
                                </li>
                                <li class="active">
                                    <a href="/questions/?sort=newest&amp;page=1&amp;area_type=all">1</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=2&amp;area_type=all">2</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=3&amp;area_type=all">3</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=4&amp;area_type=all">4</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=5&amp;area_type=all">5</a>
                                </li>
                                <li>
                                    <a href='#'>...</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=547&amp;area_type=all">547</a>
                                </li>
                                <li class="">
                                    <a href="/questions/?sort=newest&amp;page=548&amp;area_type=all">548</a>
                                </li>
                                <li class="">
                                    <a aria-label="Next" href="/questions/?sort=newest&amp;page=2&amp;area_type=all">
                                        <span aria-hidden="true">下一页</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-3 layout-side">
            <a class="btn side-btn" data-toggle="modal" data-target="#askquestion" id="showAskPanel">我要提问</a>
            <div class="panel panel-default panel-userinfo">
                <div class="panel-body body-userinfo">
                    <div class="media userinfo-header">
                        <div class="media-left">
                            <div class="user-avatar">
                                <a class="avatar" href="#sign-modal" data-toggle="modal" data-sign="signin">
                                    <img id="user_image" class="circle" src="../img/head_pic.jpg">
                                </a>
                            </div>
                        </div>
                        <div class="media-body">
                            <span class="media-heading username" id="username">李玉清</span>
                            <p class="vip-remain" id="signature">做最好的自己 ！</p>
                        </div>
                    </div>

                    <div class="row userinfo-data">
                        <hr>
                        <div>
                            <p>个人资料</p>
                            <p id="major">计算机科学与技术</p>
                            <p id="speciality"></p>
                        </div>
                    </div>

                    <div class="userinfo-footer row">
                        <div class="col-md-6 col-xs-6 pos-left">
                            参与课程数
                            <a id="coursenum"><span class="glyphicon glyphicon-bookmark"></span> 10</a>
                        </div>
                        <div class="col-md-6 col-xs-6 pos-right">
                            参加讨论组数
                            <a id="discussnum"><span class="glyphicon glyphicon-send"></span> 20</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default panel-userinfo" id="submit-question" style="display: none;">

                <h4>标题</h4><br />
                <input type="text" style="width: 250px; height:40px;" id="input-question-tile" /><br />
                <h4>内容</h4><br />
                <input type="text" style="width: 250px; height:60px;" id="input-question-content" /><br />
                <button type="button" class="submit-question btn btn-primary" data-dismiss="modal" id="hideInput"
                        style="width: 50px;">取消</button>
                <button type="button" class="submit-question btn btn-primary" data-dismiss="modal" id="submit"
                        style="width: 50px;">提交</button>
            </div>

        </div>
    </div>
</div>

<div id="base-data" data-flash="false" data-is-login=false data-is-jwt=true data-socket-url="wss://comet.shiyanlou.com"
     data-msg-user="" data-msg-system="">
</div>


<script src="temp/lib.js?=2016121272249"></script>
<script src="vendor/jquery/jquery.min.js"></script>
<script src="temp/highlight.min.js"></script>
<script src="temp/bootstrap-tour.min.js"></script>
<script src="temp/bootstrap-table.min.js"></script>
<script src="temp/bootstrap-table-zh-CN.min.js"></script>
<script src="temp/bootstrap-table-filter-control.min.js"></script>
<script>
    Raven.config('https://bc3878b7ed0a4468a65390bd79e6e73f@sentry.shiyanlou.com/5', {
        release: '3.12.13'
    }).install();
</script>

<div id="jinja-data" data-question-form="/questions/meta" data-is-authenticated="false" data-login-url="/login?next=%2Fquestions%2F"
     data-qiniu-token-url="/api/qiniu/token" data-userid="">
</div>

<script src="temp/index.js?=2016121272249"></script>

<div class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4 clearfix footer-col">
                <img src="../img/lou-level.png">
                <div class="footer-slogan">欢迎来到讨论区！</div>
                <div class="col-xs-2">
                    <div class="social-item footer-weixin-item">
                        <i class="fa fa-weixin"></i>
                        <div class="footer-weixin">
                            <img src="../img/footer-weixin.png">
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="social-item footer-qq-item">
                        <i class="fa fa-qq"></i>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="social-item footer-weibo-item">
                        <a href="http://weibo.com/shiyanlou2013" target="_blank">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">公司</div>
                <a href="../aboutus/index.html" target="_blank">关于我们</a><br>
                <a href="../contact/index.html" target="_blank">联系我们</a><br>
                <a href="http://www.simplecloud.cn/jobs.html" target="_blank">加入我们</a><br>
                <a href="https://blog.shiyanlou.com" target="_blank">技术博客</a><br>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">合作</div>
                <a href="../contribute/index.html" target="_blank">我要投稿</a><br>
                <a href="../labs/index.html" target="_blank">教师合作</a><br>
                <a href="../edu/index.html" target="_blank">高校合作</a><br>
                <a href="../friends/index.html" target="_blank">友情链接</a>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">服务</div>
                <a href="../bootcamp/index.html" target="_blank">实战训练营</a><br>
                <a href="../vip/index.html" target="_blank">会员服务</a><br>
                <a href="../courses/reports/index.html" target="_blank">实验报告</a><br>
                <a href="index.html?tag=%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank">常见问题</a><br>
                <a href="../privacy/index.html" target="_blank">隐私条款</a>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">学习路径</div>
                <a href="../paths/python/index.html" target="_blank">Python学习路径</a><br>
                <a href="../paths/linuxdev/index.html" target="_blank">Linux学习路径</a><br>
                <a href="../paths/bigdata/index.html" target="_blank">大数据学习路径</a><br>
                <a href="../paths/java/index.html" target="_blank">Java学习路径</a><br>
                <a href="../paths/php/index.html" target="_blank">PHP学习路径</a><br>
                <a href="../paths/index.html" , target="_blank">全部</a>
            </div>
        </div>
    </div>

</div>

<script src="scripts/util.js"></script>
<script>
    function disp_prompt() {
        var name = prompt("请输入您的名字", "xxx"); // 弹出input框
        alert(name);
    }
    //获取从上个页面传过来的参数
    var loc = location.href;
    var n1 = loc.length; //地址的总长度
    var n2 = loc.indexOf("="); //取得=号的位置
    var n3 = loc.indexOf("&");
    var n4 = loc.lastIndexOf("="); //取得最后一个=号的位置
    var userId = decodeURI(loc.substr(n2 + 1, n3 - n2 - 1)); //从=号后面获取userId
    var discussId = decodeURI(loc.substr(n4 + 1, n1 - n4 - 1)); //从另一个等号后面获取questionId
    var questionId = 0;

    $(function () {

        console.log(location.href)
        console.log(1)
        console.log(userId)

        //用户信息请求
        var userformData = new FormData();
        userformData.append("id", userId);
        var user = getResponse("/user", userformData, "multipart/form-data", "post");
        console.log(user)
        $("#username").text(user.responseJSON.username);
        $("#signature").text(user.responseJSON.signature);
        $("#major").text(user.responseJSON.major);
        $("#speciality").text(user.responseJSON.speciality);

        $("#user_image").attr({
            "src": "image/" + user.responseJSON.image_url
        });

        //获取某一讨论组下的所有问题
        var questionformData = new FormData();
        questionformData.append("id", userId);
        var quest = getResponse("/user/questions/createUserId", questionformData, "multipart/form-data",
            "post");
        console.log(quest)
        var coursetmp = '';
        for (var i = 0; i < quest.responseJSON.length; i++) {
            //参考样式在164-194行
            coursetmp += '<li class="question-item" id="bigData"><div class="col-md-10">' +
                '<div class="col-sm-2 question-item-author"><div class="user-avatar ">' +
                '<a class="avatar" href="../user/13/study.html" target="_blank">' +
                '<img src="https://dn-simplecloud.shiyanlou.com/gravataradmin.png?imageView2/1/w/100/h/100">' +
                '</a></div></div><div class="col-sm-10"><h4>' +
                '<a class="question-title" target="_blank" id="title' + i +
                '">' + quest.responseJSON[i].title +
                '</a></h4><div class="question-item-summary"><div class="user-username ">' +
                '<span>楼主:</span><span id="quizzername">' + quest.responseJSON[i].quizzername +
                '</span><span class="question-item-date">&nbsp;回复数：</span>' +
                '<a class="avatar" href="../user/13/study.html" target="_blank" id="replynum">' +
                quest.responseJSON[i].reply + '</a><br/><span>详情：</span><span id="content">' +
                quest.responseJSON[i].content + '</span></div></div></div></div></li>';
        }
        document.getElementById("questionlist").innerHTML = coursetmp;

        for (var i = 0; i < quest.responseJSON.length; i++) {
            $("#title" + i).click(function () {
                location.href = "show.html?" + "userId=" + userId + "&questionId=" + questionId;
            });
        }

    });

    //提交问题
    $("#submit").click(function () {
        var questiontitle = $("#input-question-tile").text();
        var questioncontent = $("#input-question-content").text();
        var submitformdata = new FormData();
        submitformdata.append("userId", userId);
        submitformdata.append("questiontitle", questiontitle);
        submitformdata.append("questioncontent", questioncontent);
        getResponse("/updateQuestion", questionformData, "multipart/form-data", "post");
    })
    //提问按钮点击事件
    $("#showAskPanel").click(function () {
        $("#submit-question").style.display = "block";
    })
    $("#hideInput").click(function () {
        $("#submit-question").style.display = "none";
    })

    //问题列表点击跳转并传参(参数是问题的标题)给问题详情界面
    $("#title10").click(function () {
        location.href = "show.html?" + "userId=" + userId + "&questionId=" + questionId;
    });
</script>


</body>

</html>